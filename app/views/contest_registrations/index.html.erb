<div class="pull-right">
  <%= link_to "Generate contest users", new_contest_contest_registration_path(@contest), class: 'btn btn-lg btn-success' %>
</div>
<h4>Contest users</h4>

<% if @contest_users %>
  <% alert_tag class: 'alert-danger' do %>
    Deleting a contest user will delete all its submissions.
  <% end %>

  <table class="table table-hover table-striped table-condensed">
    <tr>
      <th>Username</th>
      <th></th>
      <th>Nickname</th>
      <th>
      </th>
    </tr>
    <% @contest_users.map(&:user).each do |user| %>
    <tr>
      <td><%= user.username %></td>
      <td><%= image_tag user.avatar.mini_thumb.to_s, class: "img-rounded" %></td>
      <td><%= user.nickname %></td>
      <td>
        <%= link_to 'Edit', edit_contest_path(@contest), class: 'btn btn-info btn-xs' %>
        <%= link_to 'Delete', edit_contest_path(@contest), method: :delete, data: { confirm: 'Are you sure to delete? This will permanently delete all its submissions.' }, class:'btn btn-xs btn-danger' %>
      </td>
    </tr>
    <% end %>
  </table>
<% else %>
  No contest users.
<% end %>

<hr style="border-top: 3px solid #ddd">

<h4>Registered users</h4>

<% if @registered_users %>
  <% alert_tag do %>
    Unregistering a user won't delete its existing submissions.
  <% end %>

  <table class="table table-hover table-striped table-condensed">
    <tr>
      <th>Username</th>
      <th></th>
      <th>Nickname</th>
      <th></th>
    </tr>
    <% @registered_users.map(&:user).each do |user| %>
    <tr>
      <td><%= user.username %></td>
      <td><%= image_tag user.avatar.mini_thumb.to_s, class: "img-rounded" %></td>
      <td><%= user.nickname %></td>
      <td>
        <%= link_to 'Unregister', edit_contest_path(@contest), class:'btn btn-xs btn-danger' %>
      </td>
    </tr>
    <% end %>
  </table>
<% else %>
  No currently registered users.
<% end %>

<hr style="border-top: 3px solid #ddd">

<h4>Unapproved registrations</h4>

<% if @unapproved_users %>
  <% alert_tag class: 'alert-warning' do %>
    Deleting the registration will allow the user to register again.
  <% end %>

  <table class="table table-hover table-striped table-condensed">
    <tr>
      <th>Username</th>
      <th></th>
      <th>Nickname</th>
      <th></th>
    </tr>
    <% @unapproved_users.map(&:user).each do |user| %>
    <tr>
      <td><%= user.username %></td>
      <td><%= image_tag user.avatar.mini_thumb.to_s, class: "img-rounded" %></td>
      <td><%= user.nickname %></td>
      <td>
        <%= link_to 'Unregister', edit_contest_path(@contest), class:'btn btn-xs btn-danger' %>
      </td>
    </tr>
    <% end %>
  </table>
<% else %>
  No currently unapproved registrations.
<% end %>
